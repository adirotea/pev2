(function(e){function t(t){for(var o,i,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},a={index:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var p=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("c605")},1:function(e,t){},2:function(e,t){},2883:function(e,t,n){var o=n("7617");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=n("499e").default;a("5da5e98c",o,!0,{sourceMap:!1,shadowMode:!1})},"3caf":function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,".alert.c-1{background-color:#ccc;color:#454545;font-weight:700}.alert.c-1 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-1{background-color:#ccc;border-color:#ccc!important}.text-c-1{color:#ccc}.alert.c-2{background-color:#fddb61;color:#454545;font-weight:700}.alert.c-2 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-2{background-color:#fddb61;border-color:#fddb61!important}.text-c-2{color:#fddb61}.alert.c-3{background-color:#e80;color:#454545;font-weight:700}.alert.c-3 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-3{background-color:#e80;border-color:#e80!important}.text-c-3{color:#e80}.alert.c-4{background-color:#800;color:#fff;font-weight:700}.alert.c-4 .text-muted{color:#fff!important;font-weight:400}.progress-bar.c-4{background-color:#800;border-color:#800!important}.text-c-4{color:#800}.bg-hit{background-color:#ccc}.bg-read{background-color:#fddb61}.bg-dirtied{background-color:#e80}.bg-written{background-color:#800}.btn-group-xs>.btn,.btn-xs{padding:.25rem .4rem;font-size:12px;border-radius:.2rem}.btn-group-xs>.btn,.btn-group-xs>.btn .fa,.btn-xs,.btn-xs .fa{line-height:.5}@-webkit-keyframes highlight{0%{background:#f7f7f7}20%{background:#ff9}to{background:#f7f7f7}}@keyframes highlight{0%{background:#f7f7f7}20%{background:#ff9}to{background:#f7f7f7}}.plan-node{text-decoration:none;color:#4d525a;display:inline-block;-webkit-transition:all .1s;transition:all .1s;position:relative;font-size:12px;margin-bottom:4px;overflow-wrap:break-word;word-wrap:break-word;width:400px}.twod .plan-node{width:240px}.twod.plan-container.compact .plan-node{width:140px}.twod.plan-container.dot .plan-node{width:50px}.plan-node .plan-node-body{position:relative;border:1px solid #dedede;border-radius:3px;padding:6px 10px;background-color:#fff;-webkit-box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);cursor:auto}.plan-node.parallel .plan-node-body{-webkit-box-shadow:none;box-shadow:none}.plan-node header{margin-bottom:6px;overflow:hidden;cursor:pointer}.plan-node header:hover{background-color:#f7f7f7}.plan-node header h4{font-size:13px;float:left;font-weight:600;margin:0;line-height:inherit}.plan-node header .node-duration{float:right;margin-left:10px;font-size:13px}.plan-node .prop-list{color:inherit;table-layout:fixed}.plan-node:hover .plan-node-body,.plan-node:hover .workers>div{border-color:#00b5e2}.plan-node .node-description{text-align:left;font-style:italic;padding-top:10px;word-break:normal}.plan-node .node-description .node-type{font-weight:600;background-color:#00b5e2;color:#fff;padding:0 6px}.plan-node .btn-default{border:0}.plan-node .text-muted{color:#999ea7}.plan-node .plan-query-container{border:1px solid #dedede;padding:18px;background-color:#fff;position:absolute;-webkit-box-shadow:0 0 10px 2px rgba(0,0,0,.3);box-shadow:0 0 10px 2px rgba(0,0,0,.3);border-radius:3px;margin-bottom:18px;z-index:1;left:0}.plan-node .plan-query-container h3{font-size:17px;width:93%;text-align:left;border-bottom:1px solid #dedede;padding-bottom:6px;margin-bottom:10px}.plan-node .collapse-handle{cursor:pointer;position:absolute;z-index:1;bottom:0;right:0;display:none;background-color:hsla(0,0%,100%,.7)}.plan-node:hover .collapse-handle{display:block}.plan-node.never-executed .plan-node-body{background-image:linear-gradient(45deg,#f7f7f7 25%,transparent 0,transparent 50%,#f7f7f7 0,#f7f7f7 75%,transparent 0,transparent);background-size:1rem 1rem}.plan-node.highlight .plan-node-body{-webkit-animation:highlight 1s;animation:highlight 1s}.plan-node .workers{position:absolute;left:-1px;top:1px;width:100%;height:100%;cursor:pointer}.plan-node .workers>div{border:1px solid #dedede;border-radius:3px;background-color:#fff;width:100%;height:100%;position:absolute}.plan-node .workers-handle{cursor:pointer;position:absolute;top:0;right:-5px}.plan-node .workers-handle>div{position:absolute;top:0;background-color:#fff;border:1px solid #efefef;border-radius:3px}.plan-node .workers-handle>div:hover{background-color:#f7f7f7;border-color:#dedede}.node-bar-container{height:5px;margin-top:10px;margin-bottom:3px;border-radius:6px;background-color:#dedede;position:relative}.node-bar-container .node-bar{border-radius:6px;height:100%;text-align:left;position:absolute;left:0;top:0}.node-bar-label{text-align:left;display:block}.detailed{width:400px!important}ul.node-children.collapsed .plan-node,ul.node-children.collapsed .plan-node-body{width:50px!important}ul.node-children.collapsed .plan-node{display:block}ul.node-children.collapsed .plan-node .plan-node-body{height:0}ul.node-children.collapsed .plan-node .plan-node-body *{display:none}.classic .plan ul.node-children.collapsed li:before{top:7px}.classic .plan ul.node-children.collapsed li:last-child:after{height:14px}.hljs,.hljs-subst{color:#4d525a}.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-doctag,.hljs-keyword,.hljs-link,.hljs-literal,.hljs-meta-keyword,.hljs-name,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-selector-tag,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#008caf;font-weight:700}.hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#279404;font-weight:600}.hljs-section,.hljs-title{color:#008caf;font-weight:700}.hljs-comment{color:#999ea7;font-style:italic}.hljs-meta{color:#999ea7}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:600}",""]),e.exports=t},"44bc":function(e,t,n){"use strict";var o=n("2883"),a=n.n(o);a.a},"51dc":function(e,t,n){"use strict";var o=n("5681"),a=n.n(o);a.a},5681:function(e,t,n){var o=n("3caf");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=n("499e").default;a("7181d17e",o,!0,{sourceMap:!1,shadowMode:!1})},"59bd":function(e,t,n){var o=n("7b8e");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=n("499e").default;a("2a0e46b6",o,!0,{sourceMap:!1,shadowMode:!1})},7617:function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700|Source+Code+Pro:300,500&display=swap);"]),t.push([e.i,'.alert.c-1{background-color:#ccc;color:#454545;font-weight:700}.alert.c-1 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-1{background-color:#ccc;border-color:#ccc!important}.text-c-1{color:#ccc}.alert.c-2{background-color:#fddb61;color:#454545;font-weight:700}.alert.c-2 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-2{background-color:#fddb61;border-color:#fddb61!important}.text-c-2{color:#fddb61}.alert.c-3{background-color:#e80;color:#454545;font-weight:700}.alert.c-3 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-3{background-color:#e80;border-color:#e80!important}.text-c-3{color:#e80}.alert.c-4{background-color:#800;color:#fff;font-weight:700}.alert.c-4 .text-muted{color:#fff!important;font-weight:400}.progress-bar.c-4{background-color:#800;border-color:#800!important}.text-c-4{color:#800}.bg-hit{background-color:#ccc}.bg-read{background-color:#fddb61}.bg-dirtied{background-color:#e80}.bg-written{background-color:#800}.btn-group-xs>.btn,.btn-xs{padding:.25rem .4rem;font-size:12px;border-radius:.2rem}.btn-group-xs>.btn,.btn-group-xs>.btn .fa,.btn-xs,.btn-xs .fa{line-height:.5}@-webkit-keyframes highlight{0%{background:#f7f7f7}20%{background:#ff9}to{background:#f7f7f7}}@keyframes highlight{0%{background:#f7f7f7}20%{background:#ff9}to{background:#f7f7f7}}.plan-container{font-family:Noto Sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.plan-container .menu{position:absolute;z-index:1;right:0}.plan-container .menu-hidden h3,.plan-container .menu-hidden ul{display:none}.plan-container .grab-bing{cursor:-webkit-grab;cursor:-o-grab;cursor:grab}.plan-container .grab-bing:active{cursor:-webkit-grabbing;cursor:-o-grabbing;cursor:grabbing}.plan-container .text-muted{color:#ababab!important}.plan-container .cursor-help{cursor:help}.plan-container pre{overflow:initial}.plan-container code{font-weight:300;font-family:Source Code Pro}.plan-container .plan-query-text{background-color:#fff;font-family:Source Code Pro;text-align:left;margin-bottom:0}.plan-container .plan-query-text .code-key-item{background-color:#f8e400;font-weight:600;padding:1px}.plan ol,.plan ul{list-style:none}.twod .plan ol,.twod .plan ul{padding:0}.twod .plan ul.main-plan,.twod .plan ul.node-children{display:-webkit-box;display:-ms-flexbox;display:flex;margin-left:auto;margin-right:auto;padding-top:12px;margin-top:-5px;text-align:center}.classic .plan ul:first-child{padding-left:0}.classic .plan ul:first-child>li:after,.classic .plan ul:first-child>li:before{display:none}.plan ul.node-children{position:relative;-webkit-transition:all .5s;transition:all .5s}.twod .plan ul.node-children:before{content:"";position:absolute;top:0;left:50%;border-left:2px solid #c4c4c4;height:12px;width:0}.plan ul.node-children>li{list-style-type:none;position:relative;-webkit-transition:all .5s;transition:all .5s}.twod .plan ul.node-children>li:not(:first-child){padding-left:10px}.twod .plan ul.node-children>li{padding-top:12px}.twod .plan ul.node-children>li:after,.twod .plan ul.node-children>li:before{content:"";position:absolute;top:0;right:50%;border-top:2px solid #c4c4c4;width:50%;height:12px}.twod .plan ul.node-children>li:after{right:auto;left:50%;border-left:2px solid #c4c4c4}.twod .plan ul.node-children>li:only-child{padding-top:0}.twod .plan ul.node-children>li:only-child:after,.twod .plan ul.node-children>li:only-child:before{display:none}.twod .plan ul.node-children>li:first-child:before,.twod .plan ul.node-children>li:last-child:after{border:0 none}.twod .plan ul.node-children>li:last-child:before{border-right:2px solid #c4c4c4;border-radius:0 6px 0 0}.twod .plan ul.node-children>li:first-child:after{border-radius:6px 0 0 0}.classic .plan ul.node-children>li:after,.classic .plan ul.node-children>li:before{content:"";position:absolute;left:-10px}.classic .plan ul.node-children>li:before{border-top:2px solid #c4c4c4;top:22px;width:11px;left:-10px}.classic .plan ul.node-children>li:after{border-left:2px solid #c4c4c4;height:calc(100% + 4px);width:6px;top:-5px}.classic .plan ul.node-children>li:last-child:after{height:29px;border-bottom:2px solid #c4c4c4;border-radius:0 0 0 6px}.classic .plan ul.node-children>li:last-child:before{left:-4px;width:5px}.plan ul.node-children>li .plan-node:hover+ul:before{border-color:#00b5e2}.plan ul.node-children>li .plan-node:hover+ul li:after,.plan ul.node-children>li .plan-node:hover+ul li:before,.plan ul.node-children>li .plan-node:hover+ul ul:before{border-color:#008caf}.plan ul.init-plans{padding-left:0;display:block}.twod .plan ul.init-plans{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.twod .plan ul.init-plans>li{margin-left:3px;margin-right:3px;margin-bottom:10px}.plan .subplan{border:1px solid #dedede;border-radius:3px;background-color:#fcfcfc;-webkit-box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);padding:0 10px 6px 10px}.plan .subplan>h4{font-size:12px;margin-top:.5rem;font-weight:600;font-style:italic}.classic .plan .subplan{margin-bottom:3px;display:inline-block}.twod .plan .subplan{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.plan .subplan.highlight{-webkit-animation:highlight 1s;animation:highlight 1s}.plan .btn-close{border-radius:50%;-webkit-box-shadow:0;box-shadow:0;line-height:1.5;border:1px solid #dedede;background-color:#fff;font-size:12px}.plan .accordion button .fa-chevron-right{display:inline-block}.plan .accordion button .fa-chevron-down{display:none}.plan .accordion button[aria-expanded=true] .fa-chevron-right{display:none!important}.plan .accordion button[aria-expanded=true] .fa-chevron-down{display:inline-block!important}.plan-stats{font-size:13px}.plan-stats .plan-triggers-container{border:1px solid #dedede;padding:18px;background-color:#fff;position:absolute;-webkit-box-shadow:0 0 10px 2px rgba(0,0,0,.3);box-shadow:0 0 10px 2px rgba(0,0,0,.3);border-radius:3px;margin-bottom:18px;z-index:6;right:0;width:300px}.plan-stats .plan-triggers-container .btn-close{border-radius:50%;-webkit-box-shadow:0;box-shadow:0;line-height:1.5;border:1px solid #dedede;background-color:#fff;font-size:12px}.plan-stats .plan-triggers-container h3{font-size:17px;width:93%;text-align:left;border-bottom:1px solid #dedede;padding-bottom:6px;margin-bottom:10px}.tippy-popper .text-muted{color:inherit!important}.splitpanes__pane{-webkit-transition:none!important;transition:none!important}.plan-diagram{line-height:.85em;font-family:Noto Sans}.plan-diagram.plan-diagram-top{max-height:30%}.plan-diagram table tr td:nth-child(2){width:90%}.plan-diagram .legend ul li{font-size:13px}.plan-diagram .legend ul li span{display:inline-block;width:8px;height:8px;border-radius:50%}.plan-diagram table{cursor:pointer;border-collapse:collapse}.plan-diagram tbody{border-bottom:10px solid transparent}.plan-diagram td,.plan-diagram th{margin:0;color:#4d525a;white-space:nowrap}.plan-diagram td.node-type,.plan-diagram td.subplan,.plan-diagram th.node-type,.plan-diagram th.subplan{font-size:12px}.plan-diagram td.node-type,.plan-diagram th.node-type{text-transform:uppercase}.plan-diagram th{font-size:13px}',""]),e.exports=t},"7b8e":function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,"#app,body,html{height:100%}",""]),e.exports=t},c605:function(e,t,n){"use strict";n.r(t);var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex",attrs:{id:"app"}},[n("pev2",{attrs:{"plan-source":e.plan,"plan-query":e.query}})],1)},r=[],i=n("7e84"),s=n.n(i),l={name:"App",data:function(){return{plan:this.$route.query.plan||"",query:this.$route.query.query||""}},components:{pev2:s.a}},c=l,p=(n("e7dd"),n("2877")),u=Object(p["a"])(c,a,r,!1,null,null,null),d=u.exports,f=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.planSource?n("plan",{attrs:{"plan-source":e.planSource,"plan-query":e.planQuery}}):e._e()},v=[],g=n("9ab4"),m=n("60a3"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["plan-container d-flex flex-column overflow-hidden flex-grow-1 bg-light",e.viewOptions.viewMode,e.viewOptions.orientation]},[e.plan?n("div",{staticClass:"plan-stats d-flex border-bottom border-top form-inline"},[n("div",{staticClass:"d-inline-block px-2"},[e._v(" Execution time: "),e.plan.planStats.executionTime?[n("span",{staticClass:"stat-value",domProps:{innerHTML:e._s(e.$options.filters.duration(e.plan.planStats.executionTime))}})]:[n("span",{staticClass:"text-muted"},[e._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:e.getHelpMessage("missing execution time")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2"},[e._v(" Planning time: "),e.plan.planStats.planningTime?[n("span",{staticClass:"stat-value"},[n("span",{class:"mb-0 p-0 px-1 alert "+e.planningTimeClass(e.plan.planStats.planningTime/e.plan.planStats.executionTime*100),domProps:{innerHTML:e._s(e.$options.filters.duration(e.plan.planStats.planningTime))}})])]:[n("span",{staticClass:"text-muted"},[e._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:e.getHelpMessage("missing planning time")}})])]],2),e.plan.planStats.jitTime?n("div",{staticClass:"d-inline-block border-left px-2"},[e._v(" JIT: "),n("span",{staticClass:"stat-value"},[n("span",{class:"mb-0 p-0 px-1 alert "+e.planningTimeClass(e.plan.planStats.jitTime/e.plan.planStats.executionTime*100),domProps:{innerHTML:e._s(e.$options.filters.duration(e.plan.planStats.jitTime))}})])]):e._e(),n("div",{staticClass:"d-inline-block border-left px-2"},[e._v(" Slowest: "),e.plan.planStats.maxDuration?[n("span",{staticClass:"stat-value",domProps:{innerHTML:e._s(e.$options.filters.duration(e.plan.planStats.maxDuration))}}),n("button",{staticClass:"bg-transparent border-0 p-0 m-0 pl-1",on:{click:function(t){return t.preventDefault(),e.showSlowestNode(t)}}},[n("i",{staticClass:"fa fa-link text-muted"})])]:[n("span",{staticClass:"text-muted"},[e._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:e.getHelpMessage("missing slowest")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2"},[e._v(" Largest: "),e.plan.planStats.maxRows?[n("span",{staticClass:"stat-value"},[e._v(e._s(e._f("rows")(e.plan.planStats.maxRows))+" "),n("span",{staticClass:"text-muted"},[e._v("rows")])])]:[n("span",{staticClass:"text-muted"},[e._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:e.getHelpMessage("no rows")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2"},[e._v(" Costliest: "),e.plan.planStats.maxCost?[n("span",[e._v(e._s(e._f("cost")(e.plan.planStats.maxCost)))]),n("button",{staticClass:"bg-transparent border-0 p-0 m-0 pl-1",on:{click:function(t){return t.preventDefault(),e.showCostliestNode(t)}}},[n("i",{staticClass:"fa fa-link text-muted"})])]:[n("span",{staticClass:"text-muted"},[e._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:e.getHelpMessage("missing costliest")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2 position-relative"},[n("span",{staticClass:"stat-label"},[e._v("Triggers: ")]),e.plan.planStats.triggers.length?[n("span",{staticClass:"stat-value"},[n("span",{class:"mb-0 p-0 px-1 alert "+e.durationClass(e.totalTriggerDurationPercent),domProps:{innerHTML:e._s(e.$options.filters.duration(e.triggersTotalDuration))}})]),n("button",{staticClass:"bg-transparent border-0 p-0 m-0 pl-1",on:{click:function(t){t.preventDefault(),e.showTriggers=!e.showTriggers}}},[n("i",{staticClass:"fa fa-caret-down text-muted"})]),e.showTriggers?n("div",{staticClass:"plan-triggers-container text-left"},[n("button",{staticClass:"btn btn-close pull-right",on:{click:function(t){e.showTriggers=!1}}},[n("i",{staticClass:"fa fa-close"})]),n("h3",[e._v("Triggers")]),e._l(e.plan.planStats.triggers,(function(t,o){return n("div",[e._v(" "+e._s(t["Trigger Name"])+" "),n("br"),n("span",{staticClass:"text-muted"},[e._v("Called")]),e._v(" "+e._s(t["Calls"])),n("span",{staticClass:"text-muted"},[e._v("×")]),n("span",{staticClass:"float-right"},[n("span",{class:"p-0 px-1 alert "+e.durationClass(e.triggerDurationPercent(t)),domProps:{innerHTML:e._s(e.$options.filters.duration(t.Time))}}),e._v(" | "+e._s(e.triggerDurationPercent(t))),n("span",{staticClass:"text-muted"},[e._v("%")])]),n("br"),t.Relation?n("span",{staticClass:"text-muted"},[e._v("on")]):e._e(),e._v(" "+e._s(t.Relation)+" "),n("div",{staticClass:"clearfix"}),o!=e.plan.planStats.triggers.length-1?n("hr",{staticClass:"my-2"}):e._e()])}))],2):e._e()]:n("span",{staticClass:"text-muted"},[e._v(" N/A ")])],2),n("button",{class:["btn btn-sm ml-auto p-0 px-2",{"text-primary":e.showSource}],attrs:{title:"View source"},on:{click:e.showHideSource}},[n("i",{staticClass:"fa fa-code p-0"})]),n("button",{class:["border-left btn btn-sm p-0 px-2",{"text-primary":!e.viewOptions.menuHidden}],on:{click:e.showHideMenu}},[n("i",{staticClass:"fa fa-cog p-0"})])]):e._e(),!e.plan||e.viewOptions.menuHidden||e.showSource?e._e():n("div",{staticClass:"form-inline small border-bottom py-1"},[n("div",{staticClass:"btn-group btn-group-xs ml-auto mr-2"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.viewMode==e.viewModes.FULL},on:{click:function(t){e.viewOptions.viewMode=e.viewModes.FULL}}},[e._v("full")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.viewMode==e.viewModes.COMPACT},on:{click:function(t){e.viewOptions.viewMode=e.viewModes.COMPACT}}},[e._v("compact")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.viewMode==e.viewModes.DOT},on:{click:function(t){e.viewOptions.viewMode=e.viewModes.DOT}}},[e._v("dot")])]),n("div",{staticClass:"btn-group btn-group-xs mr-2"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.orientation==e.orientations.TWOD},on:{click:function(t){e.viewOptions.orientation=e.orientations.TWOD}}},[n("i",{staticClass:"fa fa-sitemap"}),e._v(" 2D ")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.orientation==e.orientations.CLASSIC},on:{click:function(t){e.viewOptions.orientation=e.orientations.CLASSIC}}},[n("i",{staticClass:"fa fa-list"}),e._v(" classic ")])]),n("div",{staticClass:"form-check mr-2 border-left pl-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.viewOptions.showDiagram,expression:"viewOptions.showDiagram"}],staticClass:"form-check-input",attrs:{id:"showDiagram",type:"checkbox"},domProps:{checked:Array.isArray(e.viewOptions.showDiagram)?e._i(e.viewOptions.showDiagram,null)>-1:e.viewOptions.showDiagram},on:{change:function(t){var n=e.viewOptions.showDiagram,o=t.target,a=!!o.checked;if(Array.isArray(n)){var r=null,i=e._i(n,r);o.checked?i<0&&e.$set(e.viewOptions,"showDiagram",n.concat([r])):i>-1&&e.$set(e.viewOptions,"showDiagram",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(e.viewOptions,"showDiagram",a)}}}),e._m(0)]),n("div",{staticClass:"form-group mr-2 pl-2 border-left"},[n("label",{staticClass:"mr-2 text-muted"},[e._v("Graph metric:")]),n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.highlightType===e.highlightTypes.NONE},on:{click:function(t){e.viewOptions.highlightType=e.highlightTypes.NONE}}},[e._v("none")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.highlightType===e.highlightTypes.DURATION},attrs:{disabled:!e.rootNode[e.nodeProps.ACTUAL_DURATION]},on:{click:function(t){e.viewOptions.highlightType=e.highlightTypes.DURATION}}},[e._v("duration")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.highlightType===e.highlightTypes.ROWS},attrs:{disabled:void 0===e.rootNode[e.nodeProps.ACTUAL_ROWS]},on:{click:function(t){e.viewOptions.highlightType=e.highlightTypes.ROWS}}},[e._v("rows")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.highlightType===e.highlightTypes.COST},on:{click:function(t){e.viewOptions.highlightType=e.highlightTypes.COST}}},[e._v("cost")])])])]),e.validationMessage?n("div",{staticClass:"h-100 w-100 d-flex justify-content-center"},[n("div",{staticClass:"alert alert-danger align-self-center"},[e._v(e._s(e.validationMessage))])]):e.showSource?n("div",{staticClass:"h-100 w-100 d-flex flex-column"},[n("div",{staticClass:"h-100 w-100 d-flex flex-column"},[n("ul",{staticClass:"nav nav-pills p-2"},[n("li",{staticClass:"nav-item"},[n("a",{class:["nav-link py-1",{active:"plan"==e.sourceTabActive}],attrs:{href:""},on:{click:function(t){t.preventDefault(),e.sourceTabActive="plan"}}},[e._v("Plan")])]),n("li",{staticClass:"nav-item"},[n("a",{class:["nav-link py-1",{active:"query"==e.sourceTabActive}],attrs:{href:""},on:{click:function(t){t.preventDefault(),e.sourceTabActive="query"}}},[e._v("Query")])])]),n("div",{staticClass:"flex-grow-1 flex-shrink-1 bg-dark overflow-auto tab-content px-2"},[n("div",{class:["tab-pane fade show",{active:"plan"==e.sourceTabActive}]},[n("pre",{staticClass:"small p-2 text-white mb-0"},[n("code",[e._v(e._s(e.planSource))])])]),n("div",{class:["tab-pane fade show",{active:"query"==e.sourceTabActive}]},[e.planQuery?n("div",{staticClass:"bg-dark"},[n("pre",{staticClass:"small p-2 text-white mb-0"},[n("code",[e._v(e._s(e.planQuery))])])]):n("div",{staticClass:"text-white p-2"},[e._v(" No query provided for this plan ")])])])])]):n("div",{staticClass:"overflow-hidden flex-grow-1 flex-shrink-1 d-flex"},[n("splitpanes",{staticClass:"default-theme",on:{resize:function(t){e.viewOptions.diagramWidth=t[0].size}}},[e.viewOptions.showDiagram?n("pane",{ref:"diagram",staticClass:"plan-diagram overflow-auto h-100",attrs:{size:e.viewOptions.diagramWidth}},[n("diagram",{attrs:{plan:e.plan,showNode:e.showNode,showCTE:e.showCTE}})],1):e._e(),n("pane",{ref:"plan",staticClass:"overflow-auto flex-grow-1 flex-shrink-1 p-1",on:{mousedown:function(t){e.menuHidden=!0}}},[n("div",{staticClass:"plan h-100 w-100 d-flex flex-column grab-bing"},[n("ul",{staticClass:"main-plan"},[n("li",[n("plan-node",{ref:"root",attrs:{node:e.rootNode,plan:e.plan,viewOptions:e.viewOptions,showCTE:e.showCTE}})],1)]),n("ul",{staticClass:"init-plans"},e._l(e.plan.ctes,(function(t){return n("li",[n("plan-node",{ref:"root",refInFor:!0,attrs:{node:t,plan:e.plan,viewOptions:e.viewOptions,showCTE:e.showCTE}})],1)})),0)])])],1)],1)])},_=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"form-check-label",attrs:{for:"showDiagram"}},[n("i",{staticClass:"fa fa-align-left"}),e._v(" Diagram")])}],T=n("2ef0"),w=n("512e"),O=(n("c1ea"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{subplan:e.node[e.nodeProps.SUBPLAN_NAME],"d-flex flex-column align-items-center":e.viewOptions.orientation==e.orientations.TWOD}},[e.node[e.nodeProps.SUBPLAN_NAME]?n("h4",[e._v(e._s(e.node[e.nodeProps.SUBPLAN_NAME]))]):e._e(),n("div",{class:["text-left plan-node",{detailed:e.showDetails,"never-executed":e.isNeverExecuted,parallel:e.workersCount}]},[e.workersCount?n("div",{staticClass:"workers text-muted py-0 px-1"},e._l(e.workersCountReversed,(function(e){return n("div",{style:"top: "+(1+2*e)+"px; left: "+(1+3*(e+1))+"px;"})})),0):e._e(),e.hasChildren?n("div",{staticClass:"collapse-handle"},[n("i",{class:["fa fa-fw",{"fa-compress":!e.collapsed,"fa-expand":e.collapsed}],attrs:{title:"Collpase or expand child nodes"},on:{click:function(t){return t.stopPropagation(),e.toggleCollapsed()}}})]):e._e(),n("div",{staticClass:"plan-node-body"},[n("header",{attrs:{title:"view node details"},on:{click:function(t){t.stopPropagation(),e.showDetails=!e.showDetails}}},[n("h4",[e._v(" "+e._s(e.getNodeName())+" ")]),e.viewOptions.viewMode===e.viewModes.FULL?n("span",[e.node[e.nodeProps.ACTUAL_DURATION]?n("span",{staticClass:"node-duration"},[n("span",{class:"p-0 px-1 rounded alert "+e.durationClass,domProps:{innerHTML:e._s(e.$options.filters.duration(e.node[e.nodeProps.ACTUAL_DURATION]))}}),e.executionTimePercent!==1/0?[e._v(" | "),n("strong",[e._v(e._s(e.executionTimePercent))]),n("span",{staticClass:"text-muted"},[e._v("%")])]:e._e()],2):e.isNeverExecuted?n("span",{staticClass:"node-duration text-warning"},[e._v(" Never executed ")]):e._e()]):e._e()]),e.viewOptions.viewMode===e.viewModes.FULL?n("div",{staticClass:"font-italic text-left"},[e.node[e.nodeProps.RELATION_NAME]?n("div",[n("span",{staticClass:"text-muted"},[e._v("on ")]),e.node[e.nodeProps.SCHEMA]?n("span",[e._v(e._s(e.node[e.nodeProps.SCHEMA])+".")]):e._e(),e._v(e._s(e.node[e.nodeProps.RELATION_NAME])+" "),e.node[e.nodeProps.ALIAS]?n("span",[e._v(" ("+e._s(e.node[e.nodeProps.ALIAS])+")")]):e._e()]):e._e(),e.node[e.nodeProps.GROUP_KEY]?n("div",[n("span",{staticClass:"text-muted"},[e._v("by")]),e._v(" "+e._s(e._f("truncate")(e._f("keysToString")(e.node[e.nodeProps.GROUP_KEY]),250,"…")))]):e._e(),e.node[e.nodeProps.SORT_KEY]?n("div",[n("span",{staticClass:"text-muted"},[e._v("by")]),e._v(" "+e._s(e._f("truncate")(e._f("keysToString")(e.node[e.nodeProps.SORT_KEY]),250,"…")))]):e._e(),e.node[e.nodeProps.JOIN_TYPE]?n("div",[e._v(e._s(e._f("truncate")(e._f("keysToString")(e.node[e.nodeProps.JOIN_TYPE]),250,"…"))+" "),n("span",{staticClass:"text-muted"},[e._v("join")])]):e._e(),e.node[e.nodeProps.INDEX_NAME]?n("div",[n("span",{staticClass:"text-muted"},[e._v(" using")]),e._v(" "+e._s(e._f("keysToString")(e.node[e.nodeProps.INDEX_NAME])))]):e._e(),e.node[e.nodeProps.HASH_CONDITION]?n("div",[n("span",{staticClass:"text-muted"},[e._v(" on")]),e._v(" "+e._s(e._f("keysToString")(e.node[e.nodeProps.HASH_CONDITION])))]):e._e(),e.node[e.nodeProps.CTE_NAME]?n("div",[n("a",{staticClass:"text-reset",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.showCTE("CTE "+e.node[e.nodeProps.CTE_NAME])}}},[n("i",{staticClass:"fa fa-link text-muted"}),e._v(" "),n("span",{staticClass:"text-muted"},[e._v("CTE")]),e._v(" "+e._s(e.node[e.nodeProps.CTE_NAME])+" ")])]):e._e()]):e._e(),e.allWorkersLaunched||e.viewOptions.viewMode!==e.viewModes.FULL?e._e():n("div",{staticClass:"text-c-3 cursor-help",attrs:{title:e.getHelpMessage("workers planned not launched")}},[n("i",{staticClass:"fa fa-exclamation-triangle"}),e._v(" "),n("span",[e._v("Not all workers launched")])]),e.lodash.isNumber(e.workersCount)&&!e.lodash.isNaN(e.workersCount)&&e.viewOptions.viewMode===e.viewModes.FULL?n("div",[n("span",[e._v("Workers: ")]),n("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.workersCount))])]):e._e(),n("div",{staticClass:"clearfix"}),e.viewOptions.highlightType!==e.highlightTypes.NONE&&null!==e.highlightValue?n("div",[n("div",{staticClass:"progress node-bar-container",staticStyle:{height:"5px"}},[n("div",{staticClass:"progress-bar",style:{width:e.barWidth+"%","background-color":e.getBarColor(e.barWidth)},attrs:{role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}})]),e.shouldShowNodeBarLabel()?n("span",{staticClass:"node-bar-label"},[n("span",{staticClass:"text-muted"},[e._v(e._s(e.viewOptions.highlightType)+":")]),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.highlightValue)}})]):e._e()]):e._e(),e.shouldShowCost?n("div",[n("span",[e._v(" Cost: "),n("span",{class:"p-0 px-1 alert "+e.costClass},[e._v(e._s(e._f("cost")(e.node[e.nodeProps.ACTUAL_COST])))]),e._v(" | "),n("span",[e._v(e._s(e.costPercent)),n("span",{staticClass:"text-muted"},[e._v("%")])])])]):e._e(),e.shouldShowRowsRemoved?n("div",[n("span",[n("b",[n("span",{class:"p-0 px-1 alert "+e.rowsRemovedClass},[e._v(e._s(100==e.rowsRemovedPercent?">99":e.rowsRemovedPercent)+"%")])]),e._v(" rows removed by filter "),n("span",{staticClass:"text-muted"},[e._v(" ("+e._s(e.tilde)+e._s(e._f("rows")(e.rowsRemoved+e.node[e.nodeProps.ACTUAL_ROWS]))+" scanned → "+e._s(e.tilde)+e._s(e._f("rows")(e.node[e.nodeProps.ACTUAL_ROWS]))+" returned) ")])])]):e._e(),e.shouldShowPlannerEstimate?n("div",[e.plannerRowEstimateDirection===e.estimateDirections.over?n("span",[e._m(0),e._v(" estimated rows")]):e._e(),e.plannerRowEstimateDirection===e.estimateDirections.under?n("span",[e._m(1),e._v(" estimated rows")]):e._e(),e.plannerRowEstimateValue!=1/0?n("span",[e._v(" by "),n("span",{class:"p-0 px-1 alert "+e.estimationClass},[n("strong",{domProps:{innerHTML:e._s(e.$options.filters.factor(e.plannerRowEstimateValue))}})])]):e._e()]):e._e(),e.showDetails?n("div",[e.getNodeTypeDescription()?n("div",{staticClass:"node-description"},[n("span",{staticClass:"node-type"},[e._v(e._s(e.node[e.nodeProps.NODE_TYPE])+" Node")]),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.getNodeTypeDescription())}})]):e._e(),n("table",{staticClass:"table table-sm prop-list"},e._l(e.props,(function(t){return e.shouldShowProp(t.key,t.value)?n("tr",[n("td",{attrs:{width:"40%"}},[e._v(e._s(t.key))]),n("td",{domProps:{innerHTML:e._s(e.$options.filters.formatNodeProp(t.key,t.value,!0))}})]):e._e()})),0),e.workersCount?n("div",[e.lodash.isArray(e.node[e.nodeProps.WORKERS])?n("div",{staticClass:"accordion",attrs:{id:"accordion-"+e._uid}},[e._l(e.node[e.nodeProps.WORKERS],(function(t,o){return[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header p-0"},[n("button",{staticClass:"btn btn-link btn-sm text-secondary",staticStyle:{"font-size":"inherit"},attrs:{type:"button","data-toggle":"collapse","data-target":"#collapse-"+e._uid+"-"+o}},[n("i",{staticClass:"fa fa-chevron-right fa-fw"}),n("i",{staticClass:"fa fa-chevron-down fa-fw"}),e._v(" Worker "+e._s(t[e.workerProps.WORKER_NUMBER])+" ")])]),n("div",{staticClass:"collapse",attrs:{id:"collapse-"+e._uid+"-"+o,"data-parent":"#accordion-"+e._uid}},[n("div",{staticClass:"card-body p-0"},[n("table",{staticClass:"table table-sm prop-list mb-0"},e._l(t,(function(t,o){return e.shouldShowProp(o,t)?n("tr",[n("td",{attrs:{width:"40%"}},[e._v(e._s(o))]),n("td",{domProps:{innerHTML:e._s(e.$options.filters.formatNodeProp(o,t,!0))}})]):e._e()})),0)])])])]}))],2):n("div",{staticClass:"font-italic"},[n("strong",[e._v("Workers")]),e._v(": Detailed information not available. Consider using "),n("code",[e._v("EXPLAIN VERBOSE")]),e._v(". ")])]):e._e(),e._m(2)]):e._e()])]),e.plans?n("ul",{class:["node-children",{collapsed:e.collapsed}]},e._l(e.plans,(function(t){return n("li",[n("plan-node",{attrs:{node:t,plan:e.plan,viewOptions:e.viewOptions,showCTE:e.showCTE}})],1)})),0):e._e()])}),S=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("strong",[n("i",{staticClass:"fa fa-arrow-up"}),e._v(" over")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("strong",[n("i",{staticClass:"fa fa-arrow-down"}),e._v(" under")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-muted text-right"},[n("em",[e._v("* Calculated value")])])}];function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}var x=function(){function e(){y(this,e)}return E(e,[{key:"getNodeTypeDescription",value:function(e){return A[e.toUpperCase()]}},{key:"getHelpMessage",value:function(e){return k[e.toUpperCase()]}}]),e}(),A={LIMIT:"returns a specified number of rows from a record set.",SORT:"sorts a record set based on the specified sort key.","NESTED LOOP":"merges two record sets by looping through every record in the first set and\n   trying to find a match in the second set. All matching records are returned.","MERGE JOIN":"merges two record sets by first sorting them on a <strong>join key</strong>.",HASH:"generates a hash table from the records in the input recordset. Hash is used by\n   <strong>Hash Join</strong>.","HASH JOIN":"joins two record sets by hashing one of them (using a <strong>Hash Scan</strong>).",AGGREGATE:"groups records together based on a GROUP BY or aggregate function (like <code>sum()</code>).",HASHAGGREGATE:"groups records together based on a GROUP BY or aggregate function (like sum()). Hash Aggregate uses\n   a hash to first organize the records by a key.","SEQ SCAN":"finds relevant records by sequentially scanning the input record set. When reading from a table,\n   Seq Scans (unlike Index Scans) perform a single read operation (only the table is read).","INDEX SCAN":"finds relevant records based on an <strong>Index</strong>.\n    Index Scans perform 2 read operations: one to\n    read the index and another to read the actual value from the table.","INDEX ONLY SCAN":"finds relevant records based on an <strong>Index</strong>.\n    Index Only Scans perform a single read operation\n    from the index and do not read from the corresponding table.","BITMAP HEAP SCAN":"searches through the pages returned by the <strong>Bitmap Index Scan</strong>\n    for relevant rows.","BITMAP INDEX SCAN":"uses a <strong>Bitmap Index</strong> (index which uses 1 bit per page)\n    to find all relevant pages.\n    Results of this node are fed to the <strong>Bitmap Heap Scan</strong>.","CTE SCAN":"performs a sequential scan of <strong>Common Table Expression (CTE) query</strong> results. Note that\n    results of a CTE are materialized (calculated and temporarily stored)."},k={"MISSING EXECUTION TIME":"Execution time (or Total runtime) not available for this plan. Make sure you\n    use EXPLAIN ANALYZE.","MISSING PLANNING TIME":"Planning time not available for this plan.","MISSING SLOWEST":"Could not compute durations. Make sure you use EXPLAIN ANALYZE.","NO ROWS":"No rows returned","MISSING COSTLIEST":"No cost info available. Considering using COSTS ON.","WORKERS PLANNED NOT LAUNCHED":"Less workers than planned were launched.\nConsider modifying max_parallel_workers or max_parallel_workers_per_gather."};function L(e,t,n,o){var a=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=e.scrollLeft,s=r.left>=a.left&&r.left<=a.right&&r.right<=a.right,l=e.scrollTop,c=r.top>=a.top&&r.top<=a.bottom&&r.bottom<=a.bottom;!n&&s&&c?o():(i=r.left+e.scrollLeft-a.left-a.width/2+r.width/2,l=r.top+e.scrollTop-a.top-20,P({element:e,to:{scrollTop:l,scrollLeft:i},duration:400,done:o}))}var N,R=function(e){var t=e.currentTime,n=e.start,o=e.change,a=e.duration,r=t;return r/=a/2,r<1?o/2*r*r+n:(r-=1,-o/2*(r*(r-2)-1)+n)};function P(e){var t=e.duration,n=e.element,o=e.to,a=e.done,r=n.scrollTop,i=n.scrollLeft,s=o.scrollTop-r,l=o.scrollLeft-i,c=(new Date).getTime(),p=function e(){var p=(new Date).getTime(),u=p-c;n.scrollTop=R({currentTime:u,start:r,change:s,duration:t}),n.scrollLeft=R({currentTime:u,start:i,change:l,duration:t}),u<t?requestAnimationFrame(e):(n.scrollTop=o.scrollTop,n.scrollLeft=o.scrollLeft,a&&a())};p()}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function M(e,t,n){return t&&D(e.prototype,t),n&&D(e,n),e}(function(e){e[e["scrollTop"]=0]="scrollTop",e[e["scrollLeft"]=1]="scrollLeft"})(N||(N={})),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var U,B,j,W,H=function(){function e(){I(this,e)}return M(e,[{key:"hslToRgb",value:function(e,t,n){var o,a,r;if(0===t)o=a=r=n;else{var i=n<.5?n*(1+t):n+t-n*t,s=2*n-i;o=this.hue2rgb(s,i,e+1/3),a=this.hue2rgb(s,i,e),r=this.hue2rgb(s,i,e-1/3)}return[Math.floor(255*o),Math.floor(255*a),Math.floor(255*r)]}},{key:"numberToColorHsl",value:function(e){var t=1.2*(100-e)/360,n=this.hslToRgb(t,.9,.4);return"rgb("+n[0]+","+n[1]+","+n[2]+")"}},{key:"durationPercentToClass",value:function(e){return e>90?4:e>40?3:e>10?2:1}},{key:"hue2rgb",value:function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}}]),e}(),K=n("c1df"),$=n.n(K),F=n("4623"),Y=n.n(F);function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(e){e[e["time"]=0]="time",e[e["rows"]=1]="rows",e[e["cost"]=2]="cost",e[e["buffers"]=3]="buffers",e[e["estimate_factor"]=4]="estimate_factor"})(U||(U={})),function(e){e[e["shared"]=0]="shared",e[e["temp"]=1]="temp",e[e["local"]=2]="local"}(B||(B={})),function(e){e["shared"]="Shared",e["temp"]="Temp",e["local"]="Local"}(j||(j={})),function(e){e["hit"]="Hit",e["read"]="Read",e["written"]="Written",e["dirtied"]="Dirtied"}(W||(W={}));var z,V=function e(){J(this,e)};V.NONE="none",V.DURATION="duration",V.ROWS="rows",V.COST="cost",function(e){e[e["over"]=1]="over",e[e["under"]=2]="under",e[e["none"]=3]="none"}(z||(z={}));var q=function e(){J(this,e)};q.FULL="full",q.COMPACT="compact",q.DOT="dot";var G=function e(){J(this,e)};G.TWOD="twod",G.CLASSIC="classic";var X,Q=function e(){J(this,e)};Q.NODE_TYPE="Node Type",Q.ACTUAL_ROWS="Actual Rows",Q.PLAN_ROWS="Plan Rows",Q.ROWS_REMOVED_BY_FILTER="Rows Removed by Filter",Q.ROWS_REMOVED_BY_JOIN_FILTER="Rows Removed by Join Filter",Q.ACTUAL_STARTUP_TIME="Actual Startup Time",Q.ACTUAL_TOTAL_TIME="Actual Total Time",Q.ACTUAL_LOOPS="Actual Loops",Q.STARTUP_COST="Startup Cost",Q.TOTAL_COST="Total Cost",Q.PLANS="Plans",Q.RELATION_NAME="Relation Name",Q.SCHEMA="Schema",Q.ALIAS="Alias",Q.GROUP_KEY="Group Key",Q.SORT_KEY="Sort Key",Q.SORT_METHOD="Sort Method",Q.SORT_SPACE_TYPE="Sort Space Type",Q.SORT_SPACE_USED="Sort Space Used",Q.JOIN_TYPE="Join Type",Q.INDEX_NAME="Index Name",Q.HASH_CONDITION="Hash Cond",Q.PARENT_RELATIONSHIP="Parent Relationship",Q.SUBPLAN_NAME="Subplan Name",Q.PARALLEL_AWARE="Parallel Aware",Q.WORKERS="Workers",Q.WORKERS_PLANNED="Workers Planned",Q.WORKERS_LAUNCHED="Workers Launched",Q.SHARED_HIT_BLOCKS="Shared Hit Blocks",Q.SHARED_READ_BLOCKS="Shared Read Blocks",Q.SHARED_DIRTIED_BLOCKS="Shared Dirtied Blocks",Q.SHARED_WRITTEN_BLOCKS="Shared Written Blocks",Q.TEMP_HIT_BLOCKS="Temp Hit Blocks",Q.TEMP_READ_BLOCKS="Temp Read Blocks",Q.TEMP_DIRTIED_BLOCKS="Temp Dirtied Blocks",Q.TEMP_WRITTEN_BLOCKS="Temp Written Blocks",Q.LOCAL_HIT_BLOCKS="Local Hit Blocks",Q.LOCAL_READ_BLOCKS="Local Read Blocks",Q.LOCAL_DIRTIED_BLOCKS="Local Dirtied Blocks",Q.LOCAL_WRITTEN_BLOCKS="Local Written Blocks",Q.IO_READ_TIME="I/O Read Time",Q.IO_WRITE_TIME="I/O Write Time",Q.COSTLIEST_NODE="*Costiest Node (by cost)",Q.LARGEST_NODE="*Largest Node (by rows)",Q.SLOWEST_NODE="*Slowest Node (by duration)",Q.ACTUAL_DURATION="*Actual Duration",Q.ACTUAL_COST="*Actual Cost",Q.PLANNER_ESTIMATE_FACTOR="*Planner Row Estimate Factor",Q.PLANNER_ESTIMATE_DIRECTION="*Planner Row Estimate Direction",Q.CTE_SCAN="CTE Scan",Q.CTE_NAME="CTE Name",Q.FUNCTION_NAME="Function Name",Q.ARRAY_INDEX_KEY="arrayIndex",Q.PEV_PLAN_TAG="plan_",function(e){e[e["duration"]=0]="duration",e[e["boolean"]=1]="boolean",e[e["rows"]=2]="rows",e[e["cost"]=3]="cost",e[e["factor"]=4]="factor",e[e["estimateDirection"]=5]="estimateDirection",e[e["json"]=6]="json",e[e["space"]=7]="space",e[e["increment"]=8]="increment"}(X||(X={}));var Z={};Z[Q.ACTUAL_ROWS]=X.rows,Z[Q.PLAN_ROWS]=X.rows,Z[Q.ACTUAL_TOTAL_TIME]=X.duration,Z[Q.ACTUAL_STARTUP_TIME]=X.duration,Z[Q.STARTUP_COST]=X.cost,Z[Q.TOTAL_COST]=X.cost,Z[Q.PARALLEL_AWARE]=X.boolean,Z[Q.WORKERS]=X.json,Z[Q.SORT_SPACE_USED]=X.space,Z[Q.ROWS_REMOVED_BY_FILTER]=X.rows,Z[Q.ROWS_REMOVED_BY_JOIN_FILTER]=X.rows,Z[Q.COSTLIEST_NODE]=X.boolean,Z[Q.LARGEST_NODE]=X.boolean,Z[Q.SLOWEST_NODE]=X.boolean,Z[Q.ACTUAL_DURATION]=X.duration,Z[Q.ACTUAL_COST]=X.cost,Z[Q.PLANNER_ESTIMATE_FACTOR]=X.factor,Z[Q.PLANNER_ESTIMATE_DIRECTION]=X.estimateDirection,Z[Q.IO_READ_TIME]=X.duration,Z[Q.IO_WRITE_TIME]=X.duration;var ee=function e(){J(this,e)};function te(e,t){if(t=!!t,e<1&&!t)return"<1 ms";if(e<1e3)return parseFloat(e.toPrecision(3)).toLocaleString()+"ms";var n=t?{}:{largest:2};return K["duration"](e).format("w[w] d[d] h[h] m[m] s[s] SSS[ms]",n)}function ne(e){return e=parseFloat(e.toPrecision(3)),e.toLocaleString()}function oe(e){return e.toLocaleString()}function ae(e){var t=parseFloat(e.toPrecision(2)).toLocaleString(),n=T["template"]('${f}&nbsp;<span class="text-muted">&times;</span>');return n({f:t})}function re(e){return e instanceof Array||(e=[e]),e=T["map"](e,(function(e){return e.replace(/(^\(|\)$)/g,"")})),e.join(", ")}function ie(e,t,n){return n=n||"...",e.length>t?e.slice(0,t)+n:e}function se(e){return le(1024*e)}function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=1024,o=t<0?0:t,a=["Bytes","kB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n)),i=T["template"]('${value}&nbsp;<span class="text-muted">${unit}</span>'),s=parseFloat((e/Math.pow(n,r)).toFixed(o)).toLocaleString();return i({value:s,unit:a[r]})}function ce(e,t,n){if(T["has"](Z,e)){if(Z[e]===X.duration)return te(t,n);if(Z[e]===X.boolean)return t?"yes":"no";if(Z[e]===X.cost)return ne(t);if(Z[e]===X.rows)return oe(t);if(Z[e]===X.factor)return ae(t);if(Z[e]===X.estimateDirection)switch(t){case z.over:return'<i class="fa fa-arrow-up"></i> over';case z.under:return'<i class="fa fa-arrow-down"></i> under';default:return"-"}else{if(Z[e]===X.json)return JSON.stringify(t,null,2);if(Z[e]===X.space)return se(t)}}return t}function pe(e){var t;return t=e>90?4:e>40?3:e>10?2:1,t?"c-"+t:""}function ue(e){return ue="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function de(e){return ve(e)||he(e)||fe()}function fe(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function he(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function ve(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function be(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}function _e(e,t){return!t||"object"!==ue(t)&&"function"!==typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function Oe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}function Se(e,t){return Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Se(e,t)}ee.WORKER_NUMBER="Worker Number",Z[ee.WORKER_NUMBER]=X.increment,Y()(K);var ye=function(e){function t(){var e;return ge(this,t),e=_e(this,we(t).apply(this,arguments)),e.executionTimePercent=NaN,e.showDetails=!1,e.collapsed=!1,e.costPercent=NaN,e.barWidth=0,e.props=[],e.plans=[],e.rowsRemoved=NaN,e.rowsRemovedPercent=NaN,e.estimateDirections=z,e.highlightTypes=V,e.viewModes=q,e.orientations=G,e.nodeProps=Q,e.workerProps=ee,e.helpService=new x,e.colorService=new H,e.lodash=T,e}return Oe(t,e),be(t,[{key:"created",value:function(){this.calculateProps(),this.calculateBar(),this.calculateDuration(),this.calculateCost(),this.calculateRowsRemoved(),this.plans=this.node[Q.PLANS],this.plannerRowEstimateDirection=this.node[Q.PLANNER_ESTIMATE_DIRECTION],this.plannerRowEstimateValue=this.node[Q.PLANNER_ESTIMATE_FACTOR],this.plan.nodeComponents.push(this)}},{key:"destroyed",value:function(){var e=this;T["remove"](this.plan.nodeComponents,(function(t){return t===e}))}},{key:"calculateDuration",value:function(){var e=this.plan.planStats.executionTime||this.plan.content.Plan[Q.ACTUAL_TOTAL_TIME];this.executionTimePercent=T["round"](this.node[Q.ACTUAL_DURATION]/e*100)}},{key:"calculateCost",value:function(){var e=this.plan.content.Plan[Q.TOTAL_COST];this.costPercent=T["round"](this.node[Q.ACTUAL_COST]/e*100)}},{key:"calculateRowsRemoved",value:function(){var e=T["find"](T["keys"](this.node),(function(e){return e===Q.ROWS_REMOVED_BY_FILTER||e===Q.ROWS_REMOVED_BY_JOIN_FILTER}));if(e){var t=this.node[e];this.rowsRemoved=t;var n=this.node[Q.ACTUAL_ROWS];this.rowsRemovedPercent=T["floor"](t/(t+n)*100)}}},{key:"calculateProps",value:function(){this.props=T["chain"](this.node).omit(Q.PLANS).omit(Q.WORKERS).map((function(e,t){return{key:t,value:e}})).value()}},{key:"getNodeTypeDescription",value:function(){return this.helpService.getNodeTypeDescription(this.node[Q.NODE_TYPE])}},{key:"getNodeName",value:function(){var e=this.isParallelAware?"Parallel ":"";return e+=this.node[Q.NODE_TYPE],this.viewOptions.viewMode!==q.DOT||this.showDetails?e.toUpperCase():e.replace(/[^A-Z]/g,"").toUpperCase()}},{key:"shouldShowNodeBarLabel",value:function(){return!!this.showDetails||!this.collapsed&&this.viewOptions.viewMode!==q.DOT}},{key:"calculateBar",value:function(){var e;if(this.$options&&this.$options.filters)switch(this.viewOptions.highlightType){case V.DURATION:if(e=this.node[Q.ACTUAL_DURATION],void 0===e){this.highlightValue=null;break}this.barWidth=Math.round(e/this.plan.planStats.maxDuration*100),this.highlightValue=this.$options.filters.duration(e);break;case V.ROWS:if(e=this.node[Q.ACTUAL_ROWS],void 0===e){this.highlightValue=null;break}this.barWidth=Math.round(e/this.plan.planStats.maxRows*100)||0,this.highlightValue=this.$options.filters.rows(e);break;case V.COST:if(e=this.node[Q.ACTUAL_COST],void 0===e){this.highlightValue=null;break}this.barWidth=Math.round(e/this.plan.planStats.maxCost*100),this.highlightValue=this.$options.filters.cost(e);break}}},{key:"getBarColor",value:function(e){return this.colorService.numberToColorHsl(e)}},{key:"toggleCollapsed",value:function(){this.collapsed=!this.collapsed}},{key:"getHelpMessage",value:function(e){return this.helpService.getHelpMessage(e)}},{key:"shouldShowProp",value:function(e,t){return t||Z[e]===X.increment||e===Q.ACTUAL_ROWS}},{key:"shouldShowPlannerEstimate",get:function(){return!(this.collapsed&&!this.showDetails||this.viewOptions.viewMode===q.DOT)&&((this.estimationClass||this.showDetails)&&this.plannerRowEstimateDirection!==z.none&&this.plannerRowEstimateValue)}},{key:"shouldShowCost",get:function(){return!(this.collapsed&&!this.showDetails||this.viewOptions.viewMode===q.DOT)&&(this.node[Q.ACTUAL_COST]&&(this.costClass||this.showDetails))}},{key:"shouldShowRowsRemoved",get:function(){return!!this.rowsRemovedClass&&this.viewOptions.viewMode===q.FULL&&!this.collapsed}},{key:"durationClass",get:function(){var e,t=this.executionTimePercent;return t>90?e=4:t>40?e=3:t>10&&(e=2),!!e&&"c-"+e}},{key:"estimationClass",get:function(){var e,t=this.node[Q.PLANNER_ESTIMATE_FACTOR];return t>1e3?e=4:t>100?e=3:t>10&&(e=2),!!e&&"c-"+e}},{key:"costClass",get:function(){var e,t=this.costPercent;return t>90?e=4:t>40?e=3:t>10&&(e=2),!!e&&"c-"+e}},{key:"rowsRemovedClass",get:function(){var e,t=this.rowsRemovedPercent*this.executionTimePercent;return t>2e3?e=4:t>500&&(e=3),!!e&&"c-"+e}},{key:"hasChildren",get:function(){return!!this.plans}},{key:"workersCount",get:function(){return T["isArray"](this.node[Q.WORKERS])?this.node[Q.WORKERS].length:parseInt(this.node[Q.WORKERS],0)}},{key:"workersCountReversed",get:function(){return de(Array(this.workersCount).keys()).slice().reverse()}},{key:"isParallelAware",get:function(){return this.node[Q.PARALLEL_AWARE]}},{key:"allWorkersLaunched",get:function(){return!this.node[Q.WORKERS_LAUNCHED]||this.node[Q.WORKERS_PLANNED]===this.node[Q.WORKERS_LAUNCHED]}},{key:"isNeverExecuted",get:function(){return this.plan.planStats.executionTime&&!this.node[Q.ACTUAL_LOOPS]}},{key:"hasSeveralLoops",get:function(){return this.node[Q.ACTUAL_LOOPS]>1}},{key:"tilde",get:function(){return this.hasSeveralLoops?"~":""}}]),t}(m["c"]);Object(g["a"])([Object(m["b"])(Object)],ye.prototype,"node",void 0),Object(g["a"])([Object(m["b"])(Object)],ye.prototype,"plan",void 0),Object(g["a"])([Object(m["b"])(Object)],ye.prototype,"viewOptions",void 0),Object(g["a"])([Object(m["b"])()],ye.prototype,"showCTE",void 0),Object(g["a"])([Object(m["d"])("viewOptions.highlightType")],ye.prototype,"calculateBar",null),ye=Object(g["a"])([Object(m["a"])({name:"plan-node",filters:{cost:ne,duration:te,factor:ae,formatNodeProp:ce,keysToString:re,truncate:ie,rows:oe}})],ye);var Ce=ye,Ee=Ce,xe=(n("51dc"),Object(p["a"])(Ee,O,S,!1,null,null,null)),Ae=xe.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"form-group text-center my-1"},[n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.metric===e.metrics.time},on:{click:function(t){e.viewOptions.metric=e.metrics.time}}},[e._v("time")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.metric===e.metrics.rows},on:{click:function(t){e.viewOptions.metric=e.metrics.rows}}},[e._v("rows")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.metric===e.metrics.estimate_factor},on:{click:function(t){e.viewOptions.metric=e.metrics.estimate_factor}}},[e._v("estimation")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.metric===e.metrics.cost},on:{click:function(t){e.viewOptions.metric=e.metrics.cost}}},[e._v("cost")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.metric===e.metrics.buffers},on:{click:function(t){e.viewOptions.metric=e.metrics.buffers}}},[e._v("buffers")])])]),e.viewOptions.metric==e.metrics.buffers?n("div",{staticClass:"form-group text-center my-1"},[n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.buffersMetric===e.buffersMetrics.shared},on:{click:function(t){e.viewOptions.buffersMetric=e.buffersMetrics.shared}}},[e._v("shared")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.buffersMetric===e.buffersMetrics.temp},on:{click:function(t){e.viewOptions.buffersMetric=e.buffersMetrics.temp}}},[e._v("temp")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.buffersMetric===e.buffersMetrics.local},on:{click:function(t){e.viewOptions.buffersMetric=e.buffersMetrics.local}}},[e._v("local")])])]):e._e(),n("div",{staticClass:"legend text-center"},[e.viewOptions.metric==e.metrics.buffers?n("ul",{staticClass:"list-unstyled list-inline mb-0"},[e._m(0),e._m(1),e._m(2),e._m(3)]):e._e()]),n("table",{staticClass:"my-1 table-hover"},e._l(e.plans,(function(t,o){return n("tbody",[0===o&&e.plans.length>1?n("tr",[n("th",{staticClass:"subplan",attrs:{colspan:"2"}},[e._v(" Main Query Plan ")])]):e._e(),e._l(t,(function(t,o){return[t[1][e.nodeProps.SUBPLAN_NAME]?n("tr",[n("td",{staticClass:"subplan pr-2",class:{"font-weight-bold":e.lodash.startsWith(t[1][e.nodeProps.SUBPLAN_NAME],"CTE")},attrs:{colspan:"2"},on:{click:function(n){return n.preventDefault(),e.showCTE(t[1][e.nodeProps.SUBPLAN_NAME])}}},[e._l(e.lodash.range(t[0]),(function(n){return[-1!=e.lodash.indexOf(t[3],n)?[e._v("│")]:0!==n?[e._v("⠀")]:e._e()]})),0!==o?[e._v(e._s(t[2]?"└":"├"))]:e._e(),n("span",{staticClass:"font-italic"},[e._v(" "+e._s(t[1][e.nodeProps.SUBPLAN_NAME])+" ")])],2)]):e._e(),n("tr",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,animation:"fade",delay:[200,0]},expression:"{arrow: true, animation: 'fade', delay: [200, 0]}"}],attrs:{content:e.tooltip(t[1])},on:{click:function(n){return n.preventDefault(),e.showNode(t[1],!1,!0)}}},[n("td",{staticClass:"node-type pr-2"},[e._l(e.lodash.range(t[0]),(function(n){return[-1!=e.lodash.indexOf(t[3],n)?[e._v("│")]:0!==n?[e._v("⠀")]:e._e()]})),0!==o?[t[1][e.nodeProps.SUBPLAN_NAME]?[t[2]?[e._v("⠀")]:[e._v("│")]]:[e._v(e._s(t[2]?"└":"├"))]]:e._e(),e._v(" "+e._s(e.nodeType(t))+" ")],2),n("td",[e.viewOptions.metric==e.metrics.time?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"progress-bar border-left bg-secondary",style:"width: "+t[1][e.nodeProps.ACTUAL_DURATION]/(e.plan.planStats.executionTime||e.plan.content.Plan[e.nodeProps.ACTUAL_TOTAL_TIME])*100+"%; height:5px;",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e.viewOptions.metric==e.metrics.rows?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-secondary",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.ACTUAL_ROWS]/e.plan.planStats.maxRows*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e._e(),e.viewOptions.metric==e.metrics.estimate_factor?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent justify-content-center",staticStyle:{height:"10px"}},[n("span",{staticClass:"text-muted small"},[n("i",{staticClass:"fa fa-fw",class:{"fa-arrow-down":t[1][e.nodeProps.PLANNER_ESTIMATE_DIRECTION]===e.estimateDirections.under}})]),n("div",{staticClass:"progress-bar",class:[t[1][e.nodeProps.PLANNER_ESTIMATE_DIRECTION]===e.estimateDirections.under?"bg-secondary":"bg-transparent"],style:"width: "+(t[1][e.nodeProps.PLANNER_ESTIMATE_FACTOR]||0)/e.maxEstimateFactor*100+"%; height:5px;",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"progress-bar border-left",staticStyle:{width:"1px",height:"5px"},attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"progress-bar",class:[t[1][e.nodeProps.PLANNER_ESTIMATE_DIRECTION]===e.estimateDirections.over?"bg-secondary":"bg-transparent"],style:"width: "+(t[1][e.nodeProps.PLANNER_ESTIMATE_FACTOR]||0)/e.maxEstimateFactor*100+"%; height:5px;",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("span",{staticClass:"text-muted small"},[n("i",{staticClass:"fa fa-fw",class:{"fa-arrow-up":t[1][e.nodeProps.PLANNER_ESTIMATE_DIRECTION]===e.estimateDirections.over}})])]):e.viewOptions.metric==e.metrics.cost?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-secondary",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.ACTUAL_COST]/e.plan.planStats.maxCost*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e.viewOptions.metric==e.metrics.buffers&&e.viewOptions.buffersMetric==e.buffersMetrics.shared&&e.plan.planStats.maxSharedBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.SHARED_HIT_BLOCKS]/e.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.SHARED_READ_BLOCKS]/e.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.SHARED_DIRTIED_BLOCKS]/e.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.SHARED_WRITTEN_BLOCKS]/e.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e.viewOptions.metric==e.metrics.buffers&&e.viewOptions.buffersMetric==e.buffersMetrics.temp&&e.plan.planStats.maxTempBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.TEMP_HIT_BLOCKS]/e.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.TEMP_READ_BLOCKS]/e.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.TEMP_DIRTIED_BLOCKS]/e.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.TEMP_WRITTEN_BLOCKS]/e.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e.viewOptions.metric==e.metrics.buffers&&e.viewOptions.buffersMetric==e.buffersMetrics.local&&e.plan.planStats.maxLocalBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.LOCAL_HIT_BLOCKS]/e.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.LOCAL_READ_BLOCKS]/e.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.LOCAL_DIRTIED_BLOCKS]/e.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.LOCAL_WRITTEN_BLOCKS]/e.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e._e()])])]}))],2)})),0)])},Le=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-hit rounded"}),e._v(" Hit ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-read"}),e._v(" Read ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-dirtied"}),e._v(" Dirtied ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-written"}),e._v(" Written ")])}];function Ne(e){return Ne="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ie(e,t,n){return t&&Pe(e.prototype,t),n&&Pe(e,n),e}function De(e,t){return!t||"object"!==Ne(t)&&"function"!==typeof t?Me(e):t}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function Be(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}function je(e,t){return je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},je(e,t)}var We=function(e){function t(){var e;return Re(this,t),e=De(this,Ue(t).apply(this,arguments)),e.plans=[[]],e.lodash=T,e.nodeProps=Q,e.metrics=U,e.buffersMetrics=B,e.estimateDirections=z,e.viewOptions={metric:U.time,buffersMetric:B.shared},e}return Be(t,e),Ie(t,[{key:"created",value:function(){var e=this,t=localStorage.getItem("diagramViewOptions");t&&T["assignIn"](this.viewOptions,JSON.parse(t)),this.flatten(this.plans[0],0,this.plan.content.Plan,!0,[]),T["each"](this.plan.ctes,(function(t){var n=[];e.flatten(n,0,t,!0,[]),e.plans.push(n)}))}},{key:"onViewOptionsChanged",value:function(e,t){localStorage.setItem("diagramViewOptions",JSON.stringify(this.viewOptions))}},{key:"tooltip",value:function(e){var t="";switch(this.viewOptions.metric){case U.time:t+=this.timeTooltip(e);break;case U.rows:t+=this.rowsTooltip(e);break;case U.estimate_factor:t+=this.estimateFactorTooltip(e);break;case U.cost:t+=this.costTooltip(e);break;case U.buffers:t+=this.buffersTooltip(e);break}return e[Q.CTE_NAME]&&(t+="<br><em>CTE "+e[Q.CTE_NAME]+"</em>"),t}},{key:"timeTooltip",value:function(e){return["Duration: ",te(e[Q.ACTUAL_DURATION],!0)].join("")}},{key:"rowsTooltip",value:function(e){return["Rows: ",oe(e[Q.ACTUAL_ROWS])].join("")}},{key:"estimateFactorTooltip",value:function(e){var t=e[Q.PLANNER_ESTIMATE_FACTOR],n=e[Q.PLANNER_ESTIMATE_DIRECTION],o="";switch(n){case z.over:o+='<i class="fa fa-arrow-up"></i> over';break;case z.under:o+='<i class="fa fa-arrow-down"></i> under';break;default:o+="Correctly"}return o+=" estimated",o+=t?" by <b>"+ae(t)+"</b>":"",o}},{key:"costTooltip",value:function(e){return["Cost: ",oe(e[Q.ACTUAL_COST])].join("")}},{key:"buffersTooltip",value:function(e){var t,n,o,a,r="";switch(this.viewOptions.buffersMetric){case B.shared:t=e[Q.SHARED_HIT_BLOCKS],n=e[Q.SHARED_READ_BLOCKS],a=e[Q.SHARED_DIRTIED_BLOCKS],o=e[Q.SHARED_WRITTEN_BLOCKS];break;case B.temp:t=e[Q.TEMP_HIT_BLOCKS],n=e[Q.TEMP_READ_BLOCKS],a=e[Q.TEMP_DIRTIED_BLOCKS],o=e[Q.TEMP_WRITTEN_BLOCKS];break;case B.local:t=e[Q.LOCAL_HIT_BLOCKS],n=e[Q.LOCAL_READ_BLOCKS],a=e[Q.LOCAL_DIRTIED_BLOCKS],o=e[Q.LOCAL_WRITTEN_BLOCKS];break}switch(r+=t?"<br>Hit: "+oe(t):"",r+=n?"<br>Read: "+oe(n):"",r+=a?"<br>Dirtied: "+oe(a):"",r+=o?"<br>Written: "+oe(o):"",r=r||" N/A",this.viewOptions.buffersMetric){case B.shared:r="Shared Blocks:"+r;break;case B.temp:r="Temp Blocks:"+r;break;case B.local:r="Local Blocks:"+r;break}return r}},{key:"nodeType",value:function(e){return e[1][Q.NODE_TYPE]}},{key:"flatten",value:function(e,t,n,o,a){var r=this;e.push([t,n,o,T["concat"]([],a)]),o||a.push(t),T["each"](n.Plans,(function(o){r.flatten(e,t+1,o,o===T["last"](n.Plans),a)})),o||a.pop()}},{key:"maxEstimateFactor",get:function(){var e=T["max"](T["map"](this.plans,(function(e){return T["max"](T["map"](e,(function(e){return e[1][Q.PLANNER_ESTIMATE_FACTOR]})))})));return 2*e||1}}]),t}(m["c"]);Object(g["a"])([Object(m["b"])()],We.prototype,"plan",void 0),Object(g["a"])([Object(m["b"])()],We.prototype,"showNode",void 0),Object(g["a"])([Object(m["b"])()],We.prototype,"showCTE",void 0),Object(g["a"])([Object(m["d"])("viewOptions",{deep:!0})],We.prototype,"onViewOptionsChanged",null),We=Object(g["a"])([Object(m["a"])({filters:{durationClass:pe}})],We);var He=We,Ke=He,$e=Object(p["a"])(Ke,ke,Le,!1,null,null,null),Fe=$e.exports;function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Je=function e(t){Ye(this,e),this[Q.NODE_TYPE]=t;var n=/^((?:Parallel\s+)?(?:Seq\sScan|Tid\sScan|Bitmap\s+Heap\s+Scan|Foreign\s+Scan|Update|Insert|Delete))\son\s(\S+)(?:\s+(\S+))?$/.exec(t),o=/^(Bitmap\s+Index\s+Scan)\son\s(\S+)$/.exec(t),a=/^((?:Parallel\s+)?Index(?:\sOnly)?\sScan(?:\sBackward)?)\susing\s(\S+)\son\s(\S+)(?:\s+(\S+))?$/.exec(t),r=/^(CTE\sScan)\son\s(\S+)(?:\s+(\S+))?$/.exec(t),i=/^(Function\sScan)\son\s(\S+)(?:\s+(\S+))?$/.exec(t),s=/^(Subquery\sScan)\son\s(.+)$/.exec(t);n?(this[Q.NODE_TYPE]=n[1],this[Q.RELATION_NAME]=n[2],n[3]&&(this[Q.ALIAS]=n[3])):o?(this[Q.NODE_TYPE]=o[1],this[Q.INDEX_NAME]=o[2]):a?(this[Q.NODE_TYPE]=a[1],this[Q.INDEX_NAME]=a[2],this[Q.RELATION_NAME]=a[3],a[4]&&(this[Q.ALIAS]=a[4])):r?(this[Q.NODE_TYPE]=r[1],this[Q.CTE_NAME]=r[2],r[3]&&(this[Q.ALIAS]=r[3])):i?(this[Q.NODE_TYPE]=i[1],this[Q.FUNCTION_NAME]=i[2],i[3]&&(this[Q.ALIAS]=i[3])):s&&(this[Q.NODE_TYPE]=s[1]);var l=/^(Parallel\s+)(.*)/.exec(this[Q.NODE_TYPE]);l&&(this[Q.NODE_TYPE]=l[2],this[Q.PARALLEL_AWARE]=!0);var c=/(.*)\sJoin$/.exec(this[Q.NODE_TYPE]),p=/(.*)\s+(Full|Left|Right|Anti)/.exec(this[Q.NODE_TYPE]);c&&(this[Q.NODE_TYPE]=c[1],p&&(this[Q.NODE_TYPE]=p[1],this[Q.JOIN_TYPE]=p[2]),this[Q.NODE_TYPE]+=" Join")};function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ve=function e(t){ze(this,e),this[ee.WORKER_NUMBER]=t},qe=n("3c66"),Ge=n.n(qe);function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ze(e,t,n){return t&&Qe(e.prototype,t),n&&Qe(e,n),e}var et=function(){function e(){Xe(this,e)}return Ze(e,[{key:"createPlan",value:function(e,t,n){n=n.replace(/(\S)(?!$)(\s{2,})/gm,"$1 ");var o={id:Q.PEV_PLAN_TAG+(new Date).getTime().toString(),name:e||"plan created on "+$()().format("LLL"),createdOn:new Date,content:t,query:n,planStats:{},nodeComponents:[],ctes:[]};return this.analyzePlan(o),o}},{key:"analyzePlan",value:function(e){this.processNode(e.content.Plan,e),this.calculateMaximums(e.content)}},{key:"isCTE",value:function(e){return"InitPlan"===e[Q.PARENT_RELATIONSHIP]&&T["startsWith"](e[Q.SUBPLAN_NAME],"CTE")}},{key:"processNode",value:function(e,t){var n=this;this.calculatePlannerEstimate(e),T["each"](e[Q.PLANS],(function(o){var a;o[Q.WORKERS]||(e[Q.WORKERS_PLANNED]&&(a=e[Q.WORKERS_LAUNCHED]||e[Q.WORKERS_PLANNED]),o[Q.WORKERS]=a||e[Q.WORKERS]);n.isCTE(o)&&t.ctes.push(o),n.processNode(o,t)})),T["remove"](e[Q.PLANS],(function(e){return n.isCTE(e)})),this.calculateActuals(e)}},{key:"calculateMaximums",value:function(e){function t(e){return T["map"](e,(function(e){return[e,t(e[Q.PLANS])]}))}var n=T["flattenDeep"](t([e.Plan])),o=T["maxBy"](n,Q.ACTUAL_ROWS);o&&(e.maxRows=o[Q.ACTUAL_ROWS]);var a=T["maxBy"](n,Q.ACTUAL_COST);a&&(a[Q.COSTLIEST_NODE]=!0,e.maxCost=a[Q.ACTUAL_COST],e.costliest=a);var r=T["maxBy"](n,Q.ACTUAL_DURATION);function i(e){return e[Q.SHARED_HIT_BLOCKS]+e[Q.SHARED_READ_BLOCKS]+e[Q.SHARED_DIRTIED_BLOCKS]+e[Q.SHARED_WRITTEN_BLOCKS]}r&&(r[Q.SLOWEST_NODE]=!0,e.maxDuration=r[Q.ACTUAL_DURATION],e.slowest=r);var s=T["maxBy"](n,(function(e){return i(e)}));function l(e){return e[Q.TEMP_HIT_BLOCKS]+e[Q.TEMP_READ_BLOCKS]+e[Q.TEMP_DIRTIED_BLOCKS]+e[Q.TEMP_WRITTEN_BLOCKS]}s&&(e.maxSharedBlocks=i(s));var c=T["maxBy"](n,(function(e){return l(e)}));function p(e){return e[Q.LOCAL_HIT_BLOCKS]+e[Q.LOCAL_READ_BLOCKS]+e[Q.LOCAL_DIRTIED_BLOCKS]+e[Q.LOCAL_WRITTEN_BLOCKS]}c&&(e.maxTempBlocks=l(c));var u=T["maxBy"](n,(function(e){return p(e)}));u&&(e.maxLocalBlocks=p(u))}},{key:"calculateActuals",value:function(e){if(!T["isUndefined"](e[Q.ACTUAL_TOTAL_TIME])){e[Q.ACTUAL_DURATION]=e[Q.ACTUAL_TOTAL_TIME],e[Q.WORKERS]||(e[Q.ACTUAL_DURATION]=e[Q.ACTUAL_DURATION]*e[Q.ACTUAL_LOOPS]);var t=e[Q.ACTUAL_DURATION]-this.childrenDuration(e,0);e[Q.ACTUAL_DURATION]=t>0?t:0}e[Q.TOTAL_COST]&&(e[Q.ACTUAL_COST]=e[Q.TOTAL_COST]),T["each"](e[Q.PLANS],(function(t){"InitPlan"!==t[Q.PARENT_RELATIONSHIP]&&t[Q.TOTAL_COST]&&(e[Q.ACTUAL_COST]=e[Q.ACTUAL_COST]-t[Q.TOTAL_COST])})),e[Q.ACTUAL_COST]<0&&(e[Q.ACTUAL_COST]=0)}},{key:"childrenDuration",value:function(e,t){var n=this;return T["each"](e[Q.PLANS],(function(e){"InitPlan"!==e[Q.PARENT_RELATIONSHIP]&&(t+=e[Q.ACTUAL_DURATION]||0,t=n.childrenDuration(e,t))})),t}},{key:"calculatePlannerEstimate",value:function(e){e[Q.ACTUAL_ROWS]&&(e[Q.PLANNER_ESTIMATE_FACTOR]=e[Q.ACTUAL_ROWS]/e[Q.PLAN_ROWS],e[Q.PLANNER_ESTIMATE_DIRECTION]=z.none,e[Q.PLANNER_ESTIMATE_FACTOR]>1&&(e[Q.PLANNER_ESTIMATE_DIRECTION]=z.under),e[Q.PLANNER_ESTIMATE_FACTOR]<1&&(e[Q.PLANNER_ESTIMATE_DIRECTION]=z.over,e[Q.PLANNER_ESTIMATE_FACTOR]=e[Q.PLAN_ROWS]/e[Q.ACTUAL_ROWS]))}},{key:"cleanupSource",value:function(e){return e=e.replace(/^(\||║|│)(.*)\1\r?\n/gm,"$2\n"),e=e.replace(/^\+-+\+\r?\n/gm,""),e=e.replace(/^(-|─|═)\1+\r?\n/gm,""),e=e.replace(/^(├|╟|╠|╞)(─|═)\2*(┤|╢|╣|╡)\r?\n/gm,""),e=e.replace(/^\+-+\+\r?\n/gm,""),e=e.replace(/^└(─)+┘\r?\n/gm,""),e=e.replace(/^╚(═)+╝\r?\n/gm,""),e=e.replace(/^┌(─)+┐\r?\n/gm,""),e=e.replace(/^╔(═)+╗\r?\n/gm,""),e=e.replace(/^(["'])(.*)\1\r?\n/gm,"$2\n"),e=e.replace(/\s*\+\r?\n/g,"\n"),e=e.replace(/↵\r?/gm,"\n"),e=e.replace(/^\s*QUERY PLAN\s*\r?\n/m,""),e=e.replace(/^\(\d+ rows?\)(\r?\n|$)/gm,"\n"),e}},{key:"fromSource",value:function(e){e=this.cleanupSource(e);var t=!1;try{t=JSON.parse(e)}catch(n){}return t?this.parseJson(e):/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)(\[|\{)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\n[\s\S]*?\1(\]|\})[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*/gm.exec(e)?this.fromJson(e):this.fromText(e)}},{key:"fromJson",value:function(e){var t=e.split(/[\r\n]+/),n="",o=0;T["each"](t,(function(e,t){var a=/^(\s*)(\[|\{)\s*$/.exec(e);if(a)return n=a[1],o=t,!1}));var a=0;T["each"](t,(function(e,t){var o=new RegExp("^"+n+"(]|})s*$").exec(e);if(o)return a=t,!1}));var r=t.slice(o,a+1).join("\n");return this.parseJson(r)}},{key:"parseJson",value:function(e){var t=Ge.a.parser(),n=[],o=null,a=null;return t.onvalue=function(e){var t=n[n.length-1];if(T["isArray"](t))t.push(e);else{var o=Object.keys(t),a=o[o.length-1];t[a]=e}},t.onopenobject=function(e){var t={};t[e]=null,n.push(t)},t.onkey=function(e){var t=n[n.length-1],o=Object.keys(t);-1!==o.indexOf(e)?a=[n.length-1,t[e]]:t[e]=null},t.onopenarray=function(){n.push([])},t.oncloseobject=t.onclosearray=function(){var e=n.pop();if(n.length){var t=n[n.length-1];if(a&&a[0]===n.length-1)T["merge"](a[1],e),a=null;else if(T["isArray"](t))t.push(e);else{var r=Object.keys(t),i=r[r.length-1];t[i]=e}}else o=e},t.write(e).close(),o instanceof Array&&(o=o[0]),o}},{key:"fromText",value:function(e){var t=this,n=e.split(/\r?\n/),o={Plan:null},a=[];if(T["each"](n,(function(e){e=e.replace(/"\s*$/,""),e=e.replace(/^\s*"/,""),e=e.replace(/\t/gm,"    ");var n=/^\s*/,r=e.match(n)[0].length;e=e.replace(n,"");var i="^s*$",s="^\\s*(QUERY|---|#).*$",l="^(\\s*->\\s*|\\s*)",c="([^\\r\\n\\t\\f\\v\\:\\(]*?)",p="\\(cost=(\\d+\\.\\d+)\\.\\.(\\d+\\.\\d+)\\s+rows=(\\d+)\\s+width=(\\d+)\\)",u="(?:",d=")",f="\\(",h="\\)",v="(?:actual\\stime=(\\d+\\.\\d+)\\.\\.(\\d+\\.\\d+)\\srows=(\\d+)\\sloops=(\\d+)|actual\\srows=(\\d+)\\sloops=(\\d+)|(never\\s+executed))",g="?",m=new RegExp(i).exec(e),b=new RegExp(s).exec(e),_=new RegExp(l+c+"\\s*"+u+(u+p)+"\\s+"+f+v+h+d+"|"+u+p+d+"|"+u+f+v+h+d+d+"*\\s*$","gm"),w=_.exec(e),O=/^(\s*)((?:Sub|Init)Plan)\s*(?:\d+\s*)?\s*(?:\(returns.*\)\s*)?$/gm,S=O.exec(e),y=/^(\s*)CTE\s+(\S+)\s*$/g,C=y.exec(e),E=/^(\s*)Trigger\s+(.*):\s+time=(\d+\.\d+)\s+calls=(\d+)\s*$/g,x=E.exec(e),A=new RegExp(/^(\s*)Worker\s+(\d+):\s+/.source+u+v+d+g+"(.*)\\s*$","g"),k=A.exec(e),L=/^(\s*)JIT:\s*$/g,N=L.exec(e),R=/^(\s*)(\S.*\S)\s*$/g,P=R.exec(e);if(!m&&!b)if(!w||C||S){if(S){S[1];var I=S[2];T["remove"](a,(function(e){return e[0]>=r}));var D=T["last"](a)[1],M={node:D.node,subelementType:I.toLowerCase(),name:S[0]};a.push([r,M])}else if(C){C[1];var U=C[2];T["remove"](a,(function(e){return e[0]>=r}));var B=T["last"](a)[1],j={node:B.node,subelementType:"initplan",name:"CTE "+U};a.push([r,j])}else if(k){k[1];var W=parseInt(k[2],0),H=T["last"](a)[1];H.node[Q.WORKERS]||(H.node[Q.WORKERS]=[]);var K=t.getWorker(H.node,W);if(K||(K=new Ve(W),H.node[Q.WORKERS].push(K)),k[3]&&k[4]&&(K[Q.ACTUAL_STARTUP_TIME]=parseFloat(k[3]),K[Q.ACTUAL_TOTAL_TIME]=parseFloat(k[4]),K[Q.ACTUAL_ROWS]=parseInt(k[5],0),K[Q.ACTUAL_LOOPS]=parseInt(k[6],0)),t.parseSort(k[10],K))return;var $=k[10].split(/: (.+)/).filter((function(e){return e}));if(k[10]){if(!$[1])return;var F=T["startCase"]($[0]);K[F]=$[1]}}else if(x){x[1];T["remove"](a,(function(e){return e[0]>=r})),o.Triggers=o.Triggers||[],o.Triggers.push({"Trigger Name":x[2],Time:t.parseTime(x[3]),Calls:x[4]})}else if(N){o.JIT={};var Y={node:o.JIT};a.push([1,Y])}else if(P){P[1];var J,z=P[2].split(/: (.+)/).filter((function(e){return e}));if(!z[1])return;if(T["remove"](a,(function(e){return e[0]>=r})),J=0===a.length?o:T["last"](a)[1].node,t.parseSort(P[2],J))return;if(t.parseBuffers(P[2],J))return;if(t.parseIOTimings(P[2],J))return;if(t.parseOptions(P[2],J))return;if(t.parseTiming(P[2],J))return;var V=z[1].replace(/(\s*ms)$/,"");parseFloat(V)&&(V=parseFloat(V));var q=z[0];-1===q.indexOf(" runtime")&&-1===q.indexOf(" time")||(q=T["startCase"](q)),J[q]=V}}else{w[1];var G=w[13],X=new Je(w[2]);(w[3]&&w[4]||w[14]&&w[15])&&(X[Q.STARTUP_COST]=parseFloat(w[3]||w[14]),X[Q.TOTAL_COST]=parseFloat(w[4]||w[15]),X[Q.PLAN_ROWS]=parseInt(w[5]||w[16],0)),(w[7]&&w[8]||w[18]&&w[19])&&(X[Q.ACTUAL_STARTUP_TIME]=parseFloat(w[7]||w[18]),X[Q.ACTUAL_TOTAL_TIME]=parseFloat(w[8]||w[19])),(w[9]&&w[10]||w[11]&&w[12]||w[20]&&w[21])&&(X[Q.ACTUAL_ROWS]=parseInt(w[9]||w[11]||w[20],0),X[Q.ACTUAL_LOOPS]=parseInt(w[10]||w[12]||w[21],0)),G&&(X[Q.ACTUAL_LOOPS]=0,X[Q.ACTUAL_ROWS]=0,X[Q.ACTUAL_TOTAL_TIME]=0);var Z={node:X,subelementType:"subnode"};if(0===a.length)return a.push([r,Z]),void(o.Plan=X);T["remove"](a,(function(e){return e[0]>=r}));var ee=T["last"](a)[1];a.push([r,Z]),ee.node[Q.PLANS]||(ee.node[Q.PLANS]=[]),"initplan"===ee.subelementType?(X[Q.PARENT_RELATIONSHIP]="InitPlan",X[Q.SUBPLAN_NAME]=ee.name):"subplan"===ee.subelementType&&(X[Q.PARENT_RELATIONSHIP]="SubPlan",X[Q.SUBPLAN_NAME]=ee.name),ee.node.Plans.push(X)}})),!o.Plan)throw new Error("Unable to parse plan");return o}},{key:"parseSort",value:function(e,t){var n=/^(\s*)Sort Method:\s+(.*)\s+(Memory|Disk):\s+(?:(\S*)kB)\s*$/g,o=n.exec(e);return!!o&&(t[Q.SORT_METHOD]=o[2].trim(),t[Q.SORT_SPACE_USED]=o[4],t[Q.SORT_SPACE_TYPE]=o[3],!0)}},{key:"parseBuffers",value:function(e,t){var n=this,o=/Buffers:\s+(.*)\s*$/g,a=o.exec(e);return!!a&&(T["each"](a[1].split(/,\s+/),(function(e){var o=/(shared|temp|local)\s+(.*)$/g,a=o.exec(e);if(a){var r=a[1];T["each"](["hit","read","written","dirtied"],(function(e){t[T["map"]([r,e,"blocks"],T["capitalize"]).join(" ")]=0})),T["each"](a[2].split(/\s+/),(function(e){n.parseBuffer(e,r,t)}))}})),!0)}},{key:"parseBuffer",value:function(e,t,n){var o=e.split(/=/),a=o[0],r=parseInt(o[1],0);n[T["map"]([t,a,"blocks"],T["capitalize"]).join(" ")]=r}},{key:"getWorker",value:function(e,t){return T["find"](e[Q.WORKERS],(function(e){return e[ee.WORKER_NUMBER]===t}))}},{key:"parseIOTimings",value:function(e,t){var n=/I\/O Timings:\s+(.*)\s*$/g,o=n.exec(e);return!!o&&(t[Q.IO_READ_TIME]=0,t[Q.IO_WRITE_TIME]=0,T["each"](o[1].split(/\s+/),(function(e){var n=e.split(/=/),o=n[0],a=parseFloat(n[1]),r=["I/O",T["capitalize"](o),"Time"].join(" ");t[r]=a})),!0)}},{key:"parseOptions",value:function(e,t){var n=/^(\s*)Options:\s+(.*)$/g,o=n.exec(e);if(o){t.Options={};var a,r=o[2].split(/\s*,\s*/);return T["each"](r,(function(e){var n=/^(\S*)\s+(.*)$/g;a=n.exec(e),t.Options[a[1]]=JSON.parse(a[2])})),!0}return!1}},{key:"parseTiming",value:function(e,t){var n=this,o=/^(\s*)Timing:\s+(.*)$/g,a=o.exec(e);if(a){t.Timing={};var r,i=a[2].split(/\s*,\s*/);return T["each"](i,(function(e){var o=/^(\S*)\s+(.*)$/g;r=o.exec(e),t.Timing[r[1]]=n.parseTime(r[2])})),!0}return!1}},{key:"parseTime",value:function(e){return parseFloat(e.replace(/(\s*ms)$/,""))}}]),e}();function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ot(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}var at=function(){function e(t){var n=this;tt(this,e),this.element=t,this.listener=!0,this.start=!1,this.startMousePositionX=0,this.startMousePositionY=0,this.startScrollPositionX=0,this.startScrollPositionY=0,this.element.addEventListener("mousedown",(function(e){e.target.closest(".plan-node-body")||(e.preventDefault(),n.clearSelection(),n.startMousePositionX=e.screenX,n.startMousePositionY=e.screenY,n.startScrollPositionX=n.element.scrollLeft,n.startScrollPositionY=n.element.scrollTop,n.start=!0)})),document.documentElement.addEventListener("mouseup",(function(e){e.preventDefault(),n.startMousePositionX=0,n.startMousePositionY=0,n.startScrollPositionX=0,n.startScrollPositionY=0,n.start=!1})),this.element.addEventListener("mousemove",(function(e){n.listener&&n.start&&(e.preventDefault(),n.element.scrollTo(n.startScrollPositionX+(n.startMousePositionX-e.screenX),n.startScrollPositionY+(n.startMousePositionY-e.screenY)))}))}return ot(e,[{key:"clearSelection",value:function(){if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges()}}}]),e}(),rt=n("6018");function it(e){return it="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function st(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ct(e,t,n){return t&&lt(e.prototype,t),n&&lt(e,n),e}function pt(e,t){return!t||"object"!==it(t)&&"function"!==typeof t?ut(e):t}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}function ft(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}function ht(e,t){return ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ht(e,t)}m["c"].use(rt["b"]),m["c"].component("tippy",rt["a"]);var vt=function(e){function t(){var e;return st(this,t),e=pt(this,dt(t).apply(this,arguments)),e.flat=[],e.menuHidden=!0,e.validationMessage="",e.showTriggers=!1,e.showSource=!1,e.sourceTabActive="plan",e.helpService=new x,e.lodash=T,e.viewOptions={menuHidden:!0,showHighlightBar:!1,showPlanStats:!0,highlightType:V.NONE,viewMode:q.FULL,orientation:G.TWOD,showDiagram:!0,diagramWidth:20},e.highlightTypes=V,e.viewModes=q,e.orientations=G,e.planService=new et,e.nodeProps=Q,e}return ft(t,e),ct(t,[{key:"mounted",value:function(){this.handleScroll()}},{key:"handleScroll",value:function(){var e=this.$refs.plan.$el;new at(e)}},{key:"created",value:function(){var e,t=this,n=localStorage.getItem("viewOptions");n&&T["assignIn"](this.viewOptions,JSON.parse(n));try{e=this.planService.fromSource(this.planSource),this.validationMessage=""}catch(a){return this.validationMessage="Couldn't parse plan",void(this.plan=null)}this.rootNode=e.Plan,this.plan=this.planService.createPlan("",e,this.planQuery);var o=this.plan.content;this.plan.planStats={executionTime:o["Execution Time"]||o["Total Runtime"]||null,planningTime:o["Planning Time"]||null,maxRows:o.maxRows||null,maxCost:o.maxCost||null,maxDuration:o.maxDuration||null,maxSharedBlocks:o.maxSharedBlocks||null,maxTempBlocks:o.maxTempBlocks||0,triggers:o.Triggers||[],jitTime:o.JIT&&o.JIT.Timing&&o.JIT.Timing.Total||null},m["c"].nextTick((function(){t.showNode(t.rootNode,!0,!1),t.plan}))}},{key:"onViewOptionsChanged",value:function(e,t){localStorage.setItem("viewOptions",JSON.stringify(this.viewOptions))}},{key:"onShowSource",value:function(e){e||m["c"].nextTick(this.handleScroll)}},{key:"showHideMenu",value:function(){this.viewOptions.menuHidden=!this.viewOptions.menuHidden}},{key:"showHideSource",value:function(){this.showSource=!this.showSource}},{key:"getHelpMessage",value:function(e){return this.helpService.getHelpMessage(e)}},{key:"showSlowestNode",value:function(){this.showNode(this.plan.content.slowest,!0,!0)}},{key:"showCostliestNode",value:function(){this.showNode(this.plan.content.costliest,!0,!0)}},{key:"showNode",value:function(e,t,n){var o=T["find"](this.plan.nodeComponents,(function(t){return t.node===e}));o&&this.highlightEl(o.$el.querySelector(".plan-node"),t,n)}},{key:"highlightEl",value:function(e,t,n){if(e){var o=this.$refs.plan.$el;L(o,e,t,(function(){n&&(e.classList.add("highlight"),setTimeout((function(){e.classList.remove("highlight")}),1e3))}))}}},{key:"showCTE",value:function(e){var t=T["find"](this.plan.nodeComponents,(function(t){return t.node[Q.SUBPLAN_NAME]===e}));t&&this.highlightEl(t.$el,!1,!0)}},{key:"triggerDurationPercent",value:function(e){this.plan,this.plan&&this.plan.planStats;var t=this.plan&&this.plan.planStats.executionTime||0,n=e.Time;return T["round"](n/t*100)}},{key:"toggleDiagram",value:function(){this.viewOptions.showDiagram=!this.viewOptions.showDiagram}},{key:"timelineTooltip",value:function(e){return this.plan?["Duration: ",te(e.node[Q.ACTUAL_DURATION],!0)," | ",e.executionTimePercent,"%"].join(""):""}},{key:"durationClass",value:function(e){var t;return t=e>90?4:e>40?3:e>10?2:1,!!t&&"c-"+t}},{key:"planningTimeClass",value:function(e){var t;return e>90?t=4:e>40?t=3:e>10&&(t=2),!!t&&"c-"+t}},{key:"totalTriggerDurationPercent",get:function(){this.plan,this.plan&&this.plan.planStats;var e=this.plan&&this.plan.planStats.executionTime||0,t=this.triggersTotalDuration||0;return T["round"](t/e*100)}},{key:"triggersTotalDuration",get:function(){if(this.plan)return T["sumBy"](this.plan.planStats.triggers,(function(e){return e.Time}))}}]),t}(m["c"]);Object(g["a"])([Object(m["b"])(String)],vt.prototype,"planSource",void 0),Object(g["a"])([Object(m["b"])(String)],vt.prototype,"planQuery",void 0),Object(g["a"])([Object(m["d"])("viewOptions",{deep:!0})],vt.prototype,"onViewOptionsChanged",null),Object(g["a"])([Object(m["d"])("showSource")],vt.prototype,"onShowSource",null),vt=Object(g["a"])([Object(m["a"])({name:"plan",components:{PlanNode:Ae,Diagram:Fe,Splitpanes:w["Splitpanes"],Pane:w["Pane"]},directives:{},filters:{cost:ne,duration:te,durationClass:pe,rows:oe}})],vt);var gt=vt,mt=gt,bt=(n("44bc"),Object(p["a"])(mt,b,_,!1,null,null,null)),_t=bt.exports;function Tt(e){return Tt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function St(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),e}function yt(e,t){return!t||"object"!==Tt(t)&&"function"!==typeof t?Ct(e):t}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Et(e){return Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Et(e)}function xt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}function At(e,t){return At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},At(e,t)}var kt=function(e){function t(){var e;return wt(this,t),e=yt(this,Et(t).apply(this,arguments)),e.planSource=(void 0)[0],e.planQuery=(void 0)[1],e}return xt(t,e),St(t,[{key:"beforeMount",value:function(){this.planSource||It.push({name:"home"})}}]),t}(m["c"]);kt=Object(g["a"])([Object(m["a"])({components:{Plan:_t}})],kt);var Lt=kt,Nt=Lt,Rt=Object(p["a"])(Nt,h,v,!1,null,null,null),Pt=Rt.exports;o["default"].use(f["a"]);var It=new f["a"]({routes:[{path:"/",name:"plan",component:Pt}]});o["default"].config.productionTip=!1,new o["default"]({router:It,render:function(e){return e(d)}}).$mount("#app")},e7dd:function(e,t,n){"use strict";var o=n("59bd"),a=n.n(o);a.a}});
//# sourceMappingURL=index.70338a86.js.map